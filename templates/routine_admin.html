{% extends 'base.html' %}
{% block title %}Manage Routines : Palashbaria Secondary School{% endblock %}
{% block content %}
<div class="admin-form">
  <h2>Manage Routines</h2>
  <form method="post" enctype="multipart/form-data">
    <div class="form-group">
      <label>Password:</label>
      <input type="password" name="password" required>
    </div>
    <div class="form-group">
      <label>Title (e.g. “Class routine - 2024”):</label>
      <input type="text" name="title" >
    </div>
    <div class="form-group">
      <label>Description:</label>
      <textarea name="description" rows="3" ></textarea>
    </div>
    <div class="form-group">
      <label>PDF File:</label>
      <input type="file" name="photo" accept="application/pdf" >
    </div>
    <div class="form-actions">
      {% if last %}
        <button type="submit" name="action" value="delete" class="btn btn-danger">
          Delete Last Routine
        </button>
      {% endif %}
      <button type="submit" name="action" value="post" class="btn btn-primary">
        Upload New Routine
      </button>
    </div>
  </form>
</div>
<div>
  <p> - </p>
</div>
<h1>Routine</h1>
<div class="grid-2" ">
  {% for r in last %}
    <div class="glass-card" style="padding: 1.5rem; margin-bottom: 1.5rem; border-radius: 1rem; 
         box-shadow: 0 4px 12px rgba(70, 3, 3, 0.413); background-color: rgba(231, 186, 123, 0.258);">
      <h3>{{ r.title }}</h3>
      <small>Uploaded: {{ r.timestamp[:10] }}</small>
      <p>{{ r.description }}</p>
      <a href="{{ url_for('static', filename='files/routine/' ~ r.filename) }}"
         target="_blank" class="btn btn-secondary mt-2">
        📄 Download / View PDF
      </a>
    </div>
  {% else %}
    <p>No routine sheets published yet.</p>
  {% endfor %}
</div>
{% endblock %}
